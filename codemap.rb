# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Codemap < Formula
  desc "Generate a brain map of your codebase for LLM context"
  homepage "https://github.com/JordanCoin/codemap"
  version "3.1.2"
  license "MIT"

  depends_on "ast-grep"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/JordanCoin/codemap/releases/download/v3.1.2/codemap_3.1.2_darwin_amd64.tar.gz"
      sha256 "6d17544528265b163be28e862456d39724623e4b0a4474ebe390f850ebeb0cb1"

      def install
        bin.install "codemap"
        (pkgshare/"sg-rules").install Dir["sg-rules/*.yml"] if Dir.exist?("sg-rules")
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/JordanCoin/codemap/releases/download/v3.1.2/codemap_3.1.2_darwin_arm64.tar.gz"
      sha256 "9c7e1b6c6b547b5e5a6e8959b83dcde31c235466737598c3d4b0bbf1b6a36fcd"

      def install
        bin.install "codemap"
        (pkgshare/"sg-rules").install Dir["sg-rules/*.yml"] if Dir.exist?("sg-rules")
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/JordanCoin/codemap/releases/download/v3.1.2/codemap_3.1.2_linux_amd64.tar.gz"
      sha256 "fd8eaa43e163139f7af5d1c4e4a469805c89b4c30182845d22d150cfb48cbe98"
      def install
        bin.install "codemap"
        (pkgshare/"sg-rules").install Dir["sg-rules/*.yml"] if Dir.exist?("sg-rules")
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/JordanCoin/codemap/releases/download/v3.1.2/codemap_3.1.2_linux_arm64.tar.gz"
      sha256 "208e0b090567d6ed63c6904fe4e87264178305a00b217c91255fb9025193421f"
      def install
        bin.install "codemap"
        (pkgshare/"sg-rules").install Dir["sg-rules/*.yml"] if Dir.exist?("sg-rules")
      end
    end
  end

  def caveats
    <<~EOS
      The --deps mode uses ast-grep for code analysis.
    EOS
  end

  test do
    system "#{bin}/codemap", "--help"
  end
end
